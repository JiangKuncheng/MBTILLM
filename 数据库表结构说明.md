 # 数据库表结构说明

## 数据库概述

MBTI推荐系统使用SQLite数据库，包含4个核心表，用于存储用户档案、行为记录、内容MBTI评分和推荐日志。

## 表结构总览

### 1. `user_mbti_profiles` - 用户MBTI档案表
**作用**: 存储用户的MBTI性格特征和推荐进度

**主要字段**:
- `user_id`: 用户ID（唯一）
- `E, I, S, N, T, F, J, P`: MBTI各维度概率值
- `mbti_type`: 推导出的MBTI类型（如"INTJ"）
- `confidence_E_I, confidence_S_N, confidence_T_F, confidence_J_P`: 各维度置信度
- `total_behaviors_analyzed`: 已分析行为总数
- `current_recommendation_page`: 当前推荐页数
- `last_recommendation_time`: 最后推荐时间

### 2. `user_post_history` - 用户行为记录表
**作用**: 记录用户的所有操作行为

**主要字段**:
- `user_id`: 用户ID
- `content_id`: 内容ID
- `action`: 行为类型（view/like/collect/comment/share/follow）
- `weight`: 行为权重
- `source`: 行为来源
- `timestamp`: 行为时间

### 3. `mbti_post_evaluations` - 内容MBTI评价表
**作用**: 存储内容的MBTI特征和帖子详情

**主要字段**:
- `content_id`: 内容ID
- `title`: 帖子标题
- `cover_image`: 封面图URL
- `author`: 作者名称
- `publish_time`: 发布时间
- `E, I, S, N, T, F, J, P`: MBTI各维度概率值

### 4. `recommendation_logs` - 推荐日志表
**作用**: 记录推荐结果和算法信息

**主要字段**:
- `user_id`: 用户ID
- `recommended_content_ids`: 推荐内容ID列表
- `similarity_scores`: 相似度分数
- `algorithm_version`: 算法版本
- `created_at`: 推荐时间

## 核心功能支持

**MBTI分析**: 通过用户行为和内容特征计算MBTI概率
**智能推荐**: 基于MBTI相似度为用户推荐内容
**行为跟踪**: 记录用户操作，触发自动MBTI更新
**内容管理**: 存储帖子详情，支持完整内容展示
**推荐优化**: 记录推荐日志，支持算法改进

## 数据关系

用户档案 ← 用户行为 → 内容MBTI → 推荐日志

这个数据库设计支持完整的个性化推荐功能，通过MBTI特征分析实现智能内容匹配。